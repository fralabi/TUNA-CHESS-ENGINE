#include <bits/stdc++.h>
#include "bitboard.hpp"

using namespace std;

enum { 
  whitePawn, 
  blackPawn, 
  knight, 
  bishop, 
  rook, 
  queen, 
  whiteKing,
  blackKing
};

const int pieceChessBoardValue [8][64] =
{
// PAWN (WHITE)
{
  0,   0,   0,   0,   0,   0,   0,   0,
100, 100, 100, 100, 100, 100, 100, 100,
 50,  50,  50,  50,  50,  50,  50,  50,
 20,  20,  20,  20,  20,  20,  20,  20,
 10,  10,  10,  10,  10,  10,  10,  10,
 10,  10,  10,  10,  10,  10,  10,  10,
  5,   5,   5,   5,   5,   5,   5,   5,
  0,   0,   0,   0,   0,   0,   0,   0
},
// PAWN (BLACK)
{
  0,   0,   0,   0,   0,   0,   0,   0,
  5,   5,   5,   5,   5,   5,   5,   5,
 10,  10,  10,  10,  10,  10,  10,  10,
 10,  10,  10,  10,  10,  10,  10,  10,
 20,  20,  20,  20,  20,  20,  20,  20,
 50,  50,  50,  50,  50,  50,  50,  50,
100, 100, 100, 100, 100, 100, 100, 100,
  0,   0,   0,   0,   0,   0,   0,   0
},
// KNIGHT
{
-120, -120, -120, -120, -120, -120, -120, -120,
-120,   75,   75,   75,   75,   75,   75, -120,
-120,   75,  150,  150,  150,  150,   75, -120,
-120,   75,  150,  300,  300,  150,   75, -120,
-120,   75,  150,  300,  300,  150,   75, -120,
-120,   75,  150,  150,  150,  150,   75, -120,
-120,   75,   75,   75,   75,   75,   75, -120,
-120, -120, -120, -120, -120, -120, -120, -120
},
// BISHOP
{
-40, -40,  -40,  -40,  -40,  -40, -40, -40,
-40,  70,   70,   70,   70,   70,  70, -40,
-40,  70,  120,  120,  120,  120,  70, -40,
-40,  70,  120,  170,  170,  120,  70, -40,
-40,  70,  120,  170,  170,  120,  70, -40,
-40,  70,  120,  120,  120,  120,  70, -40,
-40,  70,   70,   70,   70,   70,  70, -40,
-40, -40,  -40,  -40,  -40,  -40, -40, -40
},
// ROOK
{
0, 50, 100, 150, 150, 100, 50, 0,
50, 50, 100, 150, 150, 100, 50, 50,
50, 50, 100, 150, 150, 100, 50, 50,
50, 50, 100, 150, 150, 100, 50, 50,
50, 50, 100, 150, 150, 100, 50, 50,
50, 50, 100, 150, 150, 100, 50, 50,
50, 50, 100, 150, 150, 100, 50, 50,
0, 50, 100, 150, 150, 100, 50, 0
},
// QUEEN
{
250,  250, 250,  250,  250, 250, 250, 250,
250,  500, 500,  500,  500, 500, 500, 250,
250,  500, 750,  750,  750, 750, 500, 250,
250,  500, 750, 1000, 1000, 750, 500, 250,
250,  500, 750, 1000, 1000, 750, 500, 250,
250,  500, 750,  750,  750, 750, 500, 250,
250,  500, 500,  500,  500, 500, 500, 250,
250,  250, 250,  250,  250, 250, 250, 250
},
// KING (WHITE)
{
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-700, -700, -700, -700, -700, -700, -700, -700,
-200, -200, -500, -500, -500, -500, -200, -200,
 200,  300,  100, -300,  300,  100,  300,  200
},
// KING (BLACK)
{
 200,  300,  100, -300,  300,  100,  300,  200
-200, -200, -500, -500, -500, -500, -200, -200,
-700, -700, -700, -700, -700, -700, -700, -700,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900,
-900, -900, -900, -900, -900, -900, -900, -900
}
// KING (ENDGAME)
/*
{
  0,  30, 50, 200,  200,  50,  30,   0,
 30,  50, 100, 300, 300, 100,  50,  30,
 50, 100, 200, 400, 400, 200, 100,  50,
200, 300, 400, 500, 500, 400, 300, 200,
200, 300, 400, 500, 500, 400, 300, 200,
 50, 100, 200, 400, 400, 200, 100,  50,
 30,  50, 100, 300, 300, 100,  50,  30,
  0,  30,  50, 200, 200,  50,  30,   0
}
*/
};

/*
const int pieceChessBoardValueEndGame [7][64] =
{
// PAWN (WHITE)
{
  0,  0,  0,  0,  0,  0,  0,  0,
 10, 10, 10, 10, 10, 10, 10, 10,
  5,  5,  5,  5,  5,  5,  5,  5,
  2,  2,  2,  2,  2,  2,  2,  2,
  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0,
  0,  0,  0,  0,  0,  0,  0,  0
},
// PAWN (BLACK)
{
 0,  0,  0,  0,  0,  0,  0,  0,
 0,  0,  0,  0,  0,  0,  0,  0,
 0,  0,  0,  0,  0,  0,  0,  0,
 0,  0,  0,  0,  0,  0,  0,  0,
 2,  2,  2,  2,  2,  2,  2,  2,
 5,  5,  5,  5,  5,  5,  5,  5,
10, 10, 10, 10, 10, 10, 10, 10,
 0,  0,  0,  0,  0,  0,  0,  0
},
// KNIGHT
{
-120, -120, -120, -120, -120, -120, -120, -120,
-120,   25,   25,   25,   25,   25,   25, -120,
-120,   25,   50,   50,   50,   50,   25, -120,
-120,   25,   50,  100,  100,   50,   25, -120,
-120,   25,   50,  100,  100,   50,   25, -120,
-120,   25,   50,   50,   50,   50,   25, -120,
-120,   25,   25,   25,   25,   25,   25, -120,
-120, -120, -120, -120, -120, -120, -120, -120
},
// BISHOP
{
-40, -40, -40, -40, -40, -40, -40, -40,
-40,  20,  20,  20,  20,  20,  20, -40,
-40,  20,  30,  30,  30,  30,  20, -40,
-40,  20,  30,  45,  45,  30,  20, -40,
-40,  20,  30,  45,  45,  30,  20, -40,
-40,  20,  30,  30,  30,  30,  20, -40,
-40,  20,  20,  20,  20,  20,  20, -40,
-40, -40, -40, -40, -40, -40, -40, -40
},
// ROOK
{
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0,
0, 0, 10, 15, 15, 10, 0, 0
},
// QUEEN
{
0,  0,  0,  0,    0,  0, 0, 0,
0,  0,  0,  0,    0,  0, 0, 0,
0,  0, 75,  75,  75, 75, 0, 0,
0,  0, 75, 200, 200, 75, 0, 0,
0,  0, 75, 200, 200, 75, 0, 0,
0,  0, 75,  75,  75, 75, 0, 0,
0,  0,  0,   0,   0,  0, 0, 0,
0,  0,  0,   0,   0,  0, 0, 0
},
// KING
{
  0,  30, 50, 200,  200,  50,  30,   0,
 30,  50, 100, 300, 300, 100,  50,  30,
 50, 100, 200, 400, 400, 200, 100,  50,
200, 300, 400, 500, 500, 400, 300, 200,
200, 300, 400, 500, 500, 400, 300, 200,
 50, 100, 200, 400, 400, 200, 100,  50,
 30,  50, 100, 300, 300, 100,  50,  30,
  0,  30,  50, 200, 200,  50,  30,   0
}
};*/

//VALUTAZIONE OGGETTIVA DELLA POSIZIONE INDIPENDENTEMENTE DA CHI HA LA MOSSA
int evaluate (ChessBoard chessboard) {
  int white=0, black=0;

  //WHITE
  for (int i=8; i<=55; i++) {
    if(get_bit(chessboard.WhitePawns,i) > 0) {
      white += pieceChessBoardValue[whitePawn][i];
    }
  }
  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.WhiteRooks,i) > 0) {
      white += pieceChessBoardValue[rook][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.WhiteBishops,i) > 0) {
      white += pieceChessBoardValue[bishop][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.WhiteKnights,i) > 0) {
      white += pieceChessBoardValue[knight][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.WhiteQueens,i) > 0) {
      white += pieceChessBoardValue[queen][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.WhiteKing,i) > 0) {
      white += pieceChessBoardValue[whiteKing][i];
    }
  }

  //BLACK
  for (int i=8; i<=55; i++) {
    if(get_bit(chessboard.BlackPawns,i) > 0) {
      black += pieceChessBoardValue[blackPawn][i];
    }
  }
  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.BlackRooks,i) > 0) {
      black += pieceChessBoardValue[rook][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.BlackBishops,i) > 0) {
      black += pieceChessBoardValue[bishop][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.BlackKnights,i) > 0) {
      black += pieceChessBoardValue[knight][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.BlackQueens,i) > 0) {
      black += pieceChessBoardValue[queen][i];
    }
  }

  for (int i=0; i<=63; i++) {
    if(get_bit(chessboard.BlackKing,i) > 0) {
      black += pieceChessBoardValue[blackKing][i];
    }
  }

  return white-black;
  
}

int main() {
  ChessBoard first;
	initializeChessBoard(first);
	printChessBoard(first);

  cout << "EVALUATE -> " << evaluate(first) << endl;
}